using UTF-8 encoding to read!!!
脚本作者：Twinkling
脚本名称：genTerr
脚本简介：把图面作为地形导入到世界中，并且支持一些地形的变换。
脚本版本：0.1.0
适应范围：1.12.2以及以下，客户端、服务端脚本，矩形选区模式。
安装方法：
	客户端情况把js文件放在.minecraft\config\worldedit\craftscripts下。
	服务端情况把js文件放在plugins\WorldEdit\craftscripts下。
使用方法：
	选区之后，输入"/cs genTerr.js image_path pattern"或者"/cs genTerr.js pattern"，
    这两种写法属于入门用法，可以实现一些简单的地形导入功能。
    不指定图片路径时，默认选择.minecraft目录下的terrain.png图片，默认路径可能可以方便方便调试。
    选区大于图片尺寸时，多余的选区部分不会受到更改，选区小于图片尺寸时，只按照图片的部分内容生成地形。
    默认情况图片的坐标系与选区的坐标系重合。
    灰度图越亮的地方越高，以选区底面为高度0，最高255，但是最终生成地形的范围会限制在选区内。
    图面的透明度将会应用到地形上，可用于非规整边界的地形生成。
    准确一些说，图片的R通道将会解释为高度，
    图片的透明度通道在生成地形时将会被作为蒙版应用于地形，
    图片的G通道将用于描述pattern的深度，
    图片的B通道保留。
    是的，你也不一定要使用灰度图，其他通道有他的含义，灰度图的pattern深度正好等于地形的高度。
    下面为进阶使用方法的说明。
    命令的完整格式为"/cs genTerr.js [image_path] <to_pattern> [<x_offset> <z_offset>] [flags] <node_type([node_argv])>*"
    "<>"表示必选，"[]"表示可选，"*"表示闭包。
    x_offset与z_offset必须同时出现，用于描述导入图片的原点位置，x_offset与z_offset必须为非负数。
    不指定则选区(0,~,0)位置对应为图片(0,~,0)位置,
    指定后则选区(0,~,0)位置对应为图片(x_offset,~,z_offset)位置,
    当选区比图片小的时候，可以用过x_offset与z_offset来指定想要导入的图片部分。
    flags接受以下标记：
        -k : 只查看图片描述的地形的最高点方块的y坐标和最低点方块的y坐标，最大为254，最小为-1，不执行地形生成。
    <node_type([node_argv])>*描述为0到无限个node_type([node_argv])形式的组合，
    如"node_type_0() node_type_1(10) node_type_0() node_type_2(gn)",
    本脚本对图片导入的地形调整是通过用户自定义的结点流来完成的，
    每个结点输入一个地形数据，返回一个处理后的地形数据，然后把处理后的地形数据交给后面的结点继续处理，
    直到遇到写结点（执行生成地形的结点）或者结点流结束了为止，如果结点流不存在写结点，则在结点流执行结束后，自动调用默认类型的写结点。
    结点的类型如下：
        体积调整类型：
        r(offset) :抬升结点。offset为y方向的平移距离。把地形向上或向下平移，且高度的值域也会平移。
            一张图片描述高度的取值范围在[0,255]，如进行一个-10格的平移，即向下平移，则取值范围变为[-10,245]，原高度为0的地方，高度会变成-10。
        s(scale)  :缩放结点。scale为目标高度。把地形按照最高点到最低点高度缩放到目标高度的比例缩放，缩放基准平面为xoz平面（y轴为高度）。
        sp(scale) :缩放正地形结点。scale为目标高度。把xoz平面以上的地形缩放到目标高度。
        sn(scale) :缩放负地形结点。scale为目标高度。把xoz平面以下的地形缩放到目标高度。
        o(flags)  :叠加结点。flags接受'n'。把地形与选区内的地形做叠加，正地形将会在原来的地形上堆积，负地形将会对原来的地形侵蚀。
        max(flags):最大值结点。flags接受'n'。把地形与选区内的地形做最大值运算。
        min(flags):最小值结点。flags接受'n'。把地形与选区内的地形做最小值运算。
        
        图案调整类型：
        cpd(depth):常数图案深度结点。depth取值范围为[0,255]。设置图案深度为一个常数。
        apd(depth):偏移图案深度结点。depth为偏移量，取值范围为[0,255]。为图案深度做一个偏移。
        opd(flags):叠加图案深度结点。flags接受'n'。将图案深度与选区地形高度做一个叠加。

        写类型：
        f(flags)  :填充模式写结点。flags接受'a','g','n'。该模式将无视图案深度通道，从选区底面开始填充地形，填充图案为pattern，是默认的写节点类型，
        m(flags)  :移动模式写结点。flags接受'a','g','n'。该模式将选区地形的指定图案深度移动到目标高度，空出的地下空间用pattern填充。
        c(flags)  :补偿模式写结点。flags接受'a','g','n'。该模式将选区地形低于目标高度的地方进行堆积，将选区地形高于目标高度的地方进行侵蚀，
            最后地表用指定图案深度的pattern覆盖，在堆积起来的区域且不在图案深度范围的区域用选区地形原来表层的方块类型填充。
    常见结点标记类型：
        a : 在地形上方不填充空气。
        g : 禁用渐变蒙版。透明度大于等于128的地方将会被视为完全不透明，小于128的地方将会被视为完全透明的。
        n : 只认自然方块。判断选区地形的表面时，只有自然方块才会被认为是地表方块。

